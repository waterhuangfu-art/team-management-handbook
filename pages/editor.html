<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†…å®¹ç¼–è¾‘å™¨ - åˆ›å§‹äººå¸¦å›¢é˜Ÿ21è®²</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .editor-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2rem;
        }

        .editor-toolbar {
            background: var(--bg-color);
            padding: 1rem;
            border-radius: var(--radius-md);
            margin-bottom: 1rem;
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            border: 1px solid var(--border-color);
        }

        .editor-btn {
            padding: 0.5rem 1rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .editor-btn:hover {
            background: var(--primary-dark);
        }

        .editor-btn.secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .editor-select {
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
        }

        .editor-content {
            background: var(--bg-color);
            padding: 3rem;
            border-radius: var(--radius-md);
            border: 2px solid var(--border-color);
            min-height: 500px;
            outline: none;
        }

        .editor-content:focus {
            border-color: var(--primary-color);
        }

        .save-panel {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: var(--radius-md);
            margin-top: 1rem;
            border-left: 4px solid var(--primary-color);
        }

        .instruction {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 1.5rem;
            border-radius: var(--radius-md);
            margin-bottom: 2rem;
        }

        .instruction h2 {
            margin-bottom: 0.5rem;
            font-size: 1.25rem;
        }

        .instruction p {
            opacity: 0.9;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="nav-brand">åˆ›å§‹äººå¸¦å›¢é˜Ÿ21è®²</a>
            <button class="nav-toggle">â˜°</button>
            <ul class="nav-links">
                <li><a href="../index.html">è¿”å›é¦–é¡µ</a></li>
                <li><a href="author.html">ä½œè€…ä»‹ç»</a></li>
                <li><a href="quiz.html">æµ‹è¯•æ¨¡å—</a></li>
            </ul>
        </div>
    </nav>

    <div class="editor-container">
        <div class="instruction">
            <h2>ğŸ“ å¯è§†åŒ–å†…å®¹ç¼–è¾‘å™¨</h2>
            <p>é€‰æ‹©è¦ç¼–è¾‘çš„é¡µé¢ï¼Œç›´æ¥åœ¨ä¸‹æ–¹ç¼–è¾‘åŒºä¿®æ”¹å†…å®¹ï¼Œç¼–è¾‘å®Œæˆåå¤åˆ¶HTMLä»£ç ä¿å­˜åˆ°å¯¹åº”æ–‡ä»¶ã€‚</p>
        </div>

        <!-- é¡µé¢é€‰æ‹© -->
        <div style="background: var(--bg-color); padding: 1.5rem; border-radius: var(--radius-md); margin-bottom: 1rem; border: 1px solid var(--border-color);">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-primary);">
                é€‰æ‹©è¦ç¼–è¾‘çš„é¡µé¢:
            </label>
            <select id="pageSelector" class="editor-select" style="width: 100%; padding: 0.75rem;">
                <option value="">-- è¯·é€‰æ‹© --</option>
                <option value="index">é¦–é¡µ</option>
                <option value="author">ä½œè€…ä»‹ç»</option>
                <option value="day-01">Day 1: ä½ è‡ªå·±å¹²æœ€å¤š,å›¢é˜Ÿå´æ²¡æˆé•¿</option>
                <option value="day-02">Day 2: ä¸šç»©å¥½çš„äºº,ä¸ºä»€ä¹ˆä¸èƒ½ææ‹”</option>
                <option value="day-03">Day 3: ä½ æ˜¯åœ¨ç®¡ç†,è¿˜æ˜¯åœ¨ä¼ è¯</option>
                <option value="day-04">Day 4: å…¬å¸å‡ºé—®é¢˜,å…ˆåæ€è‡ªå·±</option>
                <option value="day-05">Day 5: ä½ çš„ç›®æ ‡,å›¢é˜Ÿå¬å¾—æ‡‚å—</option>
            </select>
        </div>

        <!-- ç¼–è¾‘å·¥å…·æ  -->
        <div class="editor-toolbar">
            <button class="editor-btn" onclick="document.execCommand('bold')">
                <strong>B</strong> ç²—ä½“
            </button>
            <button class="editor-btn" onclick="document.execCommand('italic')">
                <em>I</em> æ–œä½“
            </button>
            <button class="editor-btn" onclick="document.execCommand('underline')">
                <u>U</u> ä¸‹åˆ’çº¿
            </button>
            <button class="editor-btn secondary" onclick="document.execCommand('formatBlock', false, 'h2')">
                æ ‡é¢˜2
            </button>
            <button class="editor-btn secondary" onclick="document.execCommand('formatBlock', false, 'h3')">
                æ ‡é¢˜3
            </button>
            <button class="editor-btn secondary" onclick="document.execCommand('insertUnorderedList')">
                â€¢ åˆ—è¡¨
            </button>
            <button class="editor-btn secondary" onclick="document.execCommand('insertOrderedList')">
                1. åˆ—è¡¨
            </button>
            <button class="editor-btn secondary" onclick="document.execCommand('justifyLeft')">
                â† å·¦å¯¹é½
            </button>
            <button class="editor-btn secondary" onclick="document.execCommand('justifyCenter')">
                å±…ä¸­
            </button>
            <select class="editor-select" onchange="document.execCommand('fontSize', false, this.value)">
                <option value="">å­—å·</option>
                <option value="1">æœ€å°</option>
                <option value="3">æ­£å¸¸</option>
                <option value="5">å¤§</option>
                <option value="7">æœ€å¤§</option>
            </select>
            <input type="color" id="textColor" onchange="document.execCommand('foreColor', false, this.value)"
                   style="height: 36px; border: 1px solid var(--border-color); border-radius: var(--radius-sm); cursor: pointer;">
        </div>

        <!-- ç¼–è¾‘åŒºåŸŸ -->
        <div
            id="editorContent"
            class="editor-content"
            contenteditable="true"
            spellcheck="false"
        >
            <h2>æ¬¢è¿ä½¿ç”¨å¯è§†åŒ–ç¼–è¾‘å™¨</h2>
            <p>è¯·åœ¨ä¸Šæ–¹é€‰æ‹©è¦ç¼–è¾‘çš„é¡µé¢ï¼Œå†…å®¹å°†è‡ªåŠ¨åŠ è½½åˆ°è¿™é‡Œã€‚</p>
            <p>æ‚¨å¯ä»¥åƒåœ¨Wordä¸­ä¸€æ ·ç›´æ¥ç¼–è¾‘å†…å®¹ï¼š</p>
            <ul>
                <li>é€‰ä¸­æ–‡å­—åä½¿ç”¨å·¥å…·æ æŒ‰é’®è®¾ç½®æ ¼å¼</li>
                <li>ç›´æ¥è¾“å…¥å’Œåˆ é™¤æ–‡å­—</li>
                <li>å¤åˆ¶ç²˜è´´å†…å®¹</li>
            </ul>
            <p style="color: var(--primary-color); font-weight: 600;">
                ç¼–è¾‘å®Œæˆåï¼Œç‚¹å‡»ä¸‹æ–¹"å¯¼å‡ºHTML"æŒ‰é’®ä¿å­˜ã€‚
            </p>
        </div>

        <!-- ä¿å­˜é¢æ¿ -->
        <div class="save-panel">
            <h3 style="margin-bottom: 1rem; color: var(--text-primary);">ğŸ’¾ ä¿å­˜ä¿®æ”¹</h3>
            <div style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
                <button class="btn" onclick="exportHTML()">
                    ğŸ“‹ å¤åˆ¶HTMLä»£ç 
                </button>
                <button class="btn btn-secondary" onclick="previewChanges()">
                    ğŸ‘ï¸ é¢„è§ˆæ•ˆæœ
                </button>
                <button class="btn btn-secondary" onclick="resetContent()">
                    ğŸ”„ é‡ç½®å†…å®¹
                </button>
            </div>
            <div id="exportResult" style="display: none; background: var(--bg-color); padding: 1rem; border-radius: var(--radius-sm); margin-top: 1rem;">
                <p style="color: var(--primary-color); font-weight: 600; margin-bottom: 0.5rem;">âœ… HTMLä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼</p>
                <p style="color: var(--text-secondary); font-size: 0.95rem;">
                    æ¥ä¸‹æ¥è¯·ï¼š<br>
                    1. æ‰“å¼€å¯¹åº”çš„HTMLæ–‡ä»¶<br>
                    2. æ‰¾åˆ° &lt;div class="article-body"&gt; æˆ–ä¸»è¦å†…å®¹åŒºåŸŸ<br>
                    3. ç²˜è´´æ›¿æ¢å†…å®¹<br>
                    4. ä¿å­˜æ–‡ä»¶<br>
                    5. è¿è¡Œ ./update.sh æ¨é€æ›´æ–°
                </p>
            </div>
        </div>

        <!-- ä½¿ç”¨è¯´æ˜ -->
        <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: var(--radius-md); margin-top: 2rem;">
            <h3 style="font-size: 1.125rem; margin-bottom: 1rem; color: var(--text-primary);">
                ğŸ“– ä½¿ç”¨è¯´æ˜
            </h3>
            <ol style="color: var(--text-secondary); line-height: 1.8; padding-left: 1.5rem;">
                <li>åœ¨ä¸Šæ–¹é€‰æ‹©è¦ç¼–è¾‘çš„é¡µé¢</li>
                <li>åœ¨ç¼–è¾‘åŒºç›´æ¥ä¿®æ”¹å†…å®¹ï¼ˆåƒä½¿ç”¨Wordä¸€æ ·ï¼‰</li>
                <li>ä½¿ç”¨å·¥å…·æ è®¾ç½®æ–‡å­—æ ¼å¼</li>
                <li>ç‚¹å‡»"å¤åˆ¶HTMLä»£ç "æŒ‰é’®</li>
                <li>æ‰“å¼€å¯¹åº”çš„HTMLæ–‡ä»¶ï¼Œç²˜è´´æ›¿æ¢å†…å®¹éƒ¨åˆ†</li>
                <li>è¿è¡Œ ./update.sh æ¨é€æ›´æ–°åˆ°ç½‘ç«™</li>
            </ol>
        </div>
    </div>

    <script src="../js/main.js"></script>
    <script>
        // é¡µé¢å†…å®¹åŠ è½½
        const pageSelector = document.getElementById('pageSelector');
        const editorContent = document.getElementById('editorContent');
        const exportResult = document.getElementById('exportResult');

        // ç¤ºä¾‹å†…å®¹ï¼ˆå®é™…ä½¿ç”¨æ—¶å¯ä»¥é€šè¿‡AjaxåŠ è½½çœŸå®å†…å®¹ï¼‰
        const pageContents = {
            'index': `
                <h2>åˆ›å§‹äººå¸¦å›¢é˜Ÿ21è®²</h2>
                <p>21å¤©ï¼Œ21ä¸ªåœºæ™¯ï¼Œ21ä¸ªæ–¹æ³•ã€‚æ¯å¤©10åˆ†é’Ÿï¼Œæ‹¿å›å»å°±èƒ½ç”¨ã€‚</p>
                <p>è¿™æ˜¯é¦–é¡µçš„å†…å®¹ç¤ºä¾‹ï¼Œæ‚¨å¯ä»¥ç›´æ¥ç¼–è¾‘...</p>
            `,
            'author': `
                <h2>ä½œè€…ä»‹ç»</h2>
                <p>å“ˆå–½ï¼Œæœ‹å‹ä½ å¥½ï¼æˆ‘æ˜¯é»„èµ‹ã€‚</p>
                <p>æˆ‘åœ¨å¤§æ¹¾åŒºå·¥ä½œç”Ÿæ´»ï¼Œæ˜¯ä¸ªåˆ›ä¸šæ•™ç»ƒ...</p>
            `
        };

        pageSelector.addEventListener('change', function() {
            const selectedPage = this.value;
            if (selectedPage && pageContents[selectedPage]) {
                editorContent.innerHTML = pageContents[selectedPage];
            } else if (selectedPage) {
                editorContent.innerHTML = `
                    <h2>ç¼–è¾‘ ${this.options[this.selectedIndex].text}</h2>
                    <p>è¯·åœ¨è¿™é‡Œè¾“å…¥æˆ–ç²˜è´´å†…å®¹...</p>
                    <p>æ‚¨å¯ä»¥ç›´æ¥ç¼–è¾‘è¿™äº›æ–‡å­—ã€‚</p>
                `;
            }
            exportResult.style.display = 'none';
        });

        // å¯¼å‡ºHTML
        function exportHTML() {
            const html = editorContent.innerHTML;

            // å¤åˆ¶åˆ°å‰ªè´´æ¿
            navigator.clipboard.writeText(html).then(() => {
                exportResult.style.display = 'block';

                // 3ç§’åè‡ªåŠ¨éšè—
                setTimeout(() => {
                    exportResult.style.display = 'none';
                }, 5000);
            }).catch(err => {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶å†…å®¹');
                console.error('å¤åˆ¶å¤±è´¥:', err);
            });
        }

        // é¢„è§ˆæ•ˆæœ
        function previewChanges() {
            const previewWindow = window.open('', 'preview', 'width=800,height=600');
            previewWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <title>é¢„è§ˆ</title>
                    <link rel="stylesheet" href="../css/style.css">
                </head>
                <body>
                    <div class="container">
                        <div class="article-content">
                            ${editorContent.innerHTML}
                        </div>
                    </div>
                </body>
                </html>
            `);
        }

        // é‡ç½®å†…å®¹
        function resetContent() {
            if (confirm('ç¡®å®šè¦é‡ç½®å†…å®¹å—ï¼Ÿæœªä¿å­˜çš„ä¿®æ”¹å°†ä¸¢å¤±ã€‚')) {
                pageSelector.dispatchEvent(new Event('change'));
            }
        }
    </script>
</body>
</html>
